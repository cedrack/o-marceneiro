<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produtos - O Marceneiro</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <a href="index.html" class="logo">
                <img src="logo.svg" alt="O Marceneiro">
            </a>
            <button class="menu-toggle" id="menuToggle" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links" id="navLinks">
                <a href="index.html">In√≠cio</a>
                <a href="produtos.html">Produtos</a>
                <a href="index.html#sobre">Sobre</a>
                <a href="index.html#servicos">Servi√ßos</a>
                <a href="index.html#contato">Contato</a>
                <span id="userMenu" style="display: none;">
                    <a href="pedidos.html">Meus Pedidos</a>
                    <a href="carrinho.html">Carrinho</a>
                    <span id="adminMenu" style="display: none;">
                        <a href="admin.html">Admin</a>
                    </span>
                    <a href="#" id="logoutBtn">Sair</a>
                </span>
                <span id="guestMenu">
                    <a href="login.html">Entrar</a>
                    <a href="cadastro.html" class="btn-primary">Cadastrar</a>
                </span>
            </div>
        </nav>
    </header>

    <div class="products-section">
        <div class="container">
            <h1 class="section-title">Nossos Produtos</h1>
            <p class="section-subtitle">Explore nossa ampla variedade de m√≥veis planejados, cada um projetado com aten√ß√£o aos detalhes e qualidade superior</p>
            
            <!-- Filtros e Busca -->
            <div class="filters-container">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Buscar produtos..." class="search-input">
                    <span class="search-icon">üîç</span>
                </div>
                <div class="filters-grid">
                    <div class="filter-group">
                        <label class="filter-label" for="categoryFilter">Categoria</label>
                        <select id="categoryFilter" class="filter-select">
                            <option value="">Todas</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label" for="minPriceFilter">Pre√ßo M√≠nimo</label>
                        <input type="number" id="minPriceFilter" class="filter-input" placeholder="R$ 0" min="0">
                    </div>
                    <div class="filter-group">
                        <label class="filter-label" for="maxPriceFilter">Pre√ßo M√°ximo</label>
                        <input type="number" id="maxPriceFilter" class="filter-input" placeholder="R$ 50000" min="0">
                    </div>
                    <div class="filter-group">
                        <label class="filter-checkbox">
                            <input type="checkbox" id="inStockFilter" checked>
                            <span>Apenas em estoque</span>
                        </label>
                    </div>
                    <div class="filter-group">
                        <label class="filter-checkbox">
                            <input type="checkbox" id="featuredFilter">
                            <span>Apenas destaques</span>
                        </label>
                    </div>
                    <div class="filter-group">
                        <button onclick="clearFilters()" class="btn-secondary">Limpar Filtros</button>
                    </div>
                </div>
            </div>
            
            <div class="products-grid" id="productsContainer">
                <!-- Produtos ser√£o carregados via JavaScript -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <h3>O Marceneiro</h3>
                    <p>M√≥veis planejados de qualidade para transformar sua casa.</p>
                </div>
                <div>
                    <h3>Links R√°pidos</h3>
                    <ul>
                        <li><a href="produtos.html">Produtos</a></li>
                        <li><a href="pedidos.html">Meus Pedidos</a></li>
                    </ul>
                </div>
                <div>
                    <h3>Contato</h3>
                    <p>Email: contato@omarceneiro.com<br>Telefone: (11) 9999-9999<br>üí¨ WhatsApp: <button type="button" onclick="openWhatsApp('Ol√°! Gostaria de mais informa√ß√µes sobre os produtos.');" class="whatsapp-link-footer" style="background: none; border: none; padding: 0; color: var(--secondary); text-decoration: none; font-weight: 600; cursor: pointer; font-size: inherit; font-family: inherit;">(11) 99999-9999</button></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 O Marceneiro. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="database.js"></script>
    <script src="utils.js"></script>
    <script src="app.js"></script>
    <script>
        updateNavigation().catch(err => console.error('Erro ao atualizar navega√ß√£o:', err));
        
        // currentFilters √© declarado em app.js, mas garantimos que existe
        if (typeof currentFilters === 'undefined') {
            currentFilters = {
                search: '',
                category: '',
                minPrice: '',
                maxPrice: '',
                inStock: true,
                featured: false
            };
        }
        
        // Carregar categorias no filtro
        function loadCategories() {
            const categories = getCategories();
            const select = document.getElementById('categoryFilter');
            if (select) {
                categories.forEach(cat => {
                    const option = document.createElement('option');
                    option.value = cat;
                    option.textContent = cat;
                    select.appendChild(option);
                });
            }
        }
        
        // Configurar filtros
        function setupFilters() {
            const searchInput = document.getElementById('searchInput');
            const categoryFilter = document.getElementById('categoryFilter');
            const minPriceFilter = document.getElementById('minPriceFilter');
            const maxPriceFilter = document.getElementById('maxPriceFilter');
            const inStockFilter = document.getElementById('inStockFilter');
            const featuredFilter = document.getElementById('featuredFilter');
            
            // Busca com debounce
            if (searchInput) {
                searchInput.addEventListener('input', debounce((e) => {
                    currentFilters.search = e.target.value;
                    loadProducts();
                }, 300));
            }
            
            if (categoryFilter) {
                categoryFilter.addEventListener('change', (e) => {
                    currentFilters.category = e.target.value;
                    loadProducts();
                });
            }
            
            if (minPriceFilter) {
                minPriceFilter.addEventListener('input', debounce((e) => {
                    currentFilters.minPrice = e.target.value;
                    loadProducts();
                }, 500));
            }
            
            if (maxPriceFilter) {
                maxPriceFilter.addEventListener('input', debounce((e) => {
                    currentFilters.maxPrice = e.target.value;
                    loadProducts();
                }, 500));
            }
            
            if (inStockFilter) {
                inStockFilter.addEventListener('change', (e) => {
                    currentFilters.inStock = e.target.checked;
                    loadProducts();
                });
            }
            
            if (featuredFilter) {
                featuredFilter.addEventListener('change', (e) => {
                    currentFilters.featured = e.target.checked;
                    loadProducts();
                });
            }
        }
        
        // Limpar filtros
        globalThis.clearFilters = async function() {
            currentFilters = {
                search: '',
                category: '',
                minPrice: '',
                maxPrice: '',
                inStock: true,
                featured: false
            };
            
            document.getElementById('searchInput').value = '';
            document.getElementById('categoryFilter').value = '';
            document.getElementById('minPriceFilter').value = '';
            document.getElementById('maxPriceFilter').value = '';
            document.getElementById('inStockFilter').checked = true;
            document.getElementById('featuredFilter').checked = false;
            
            await loadProducts();
        };
        
        loadCategories();
        setupFilters();
        loadProducts();
    </script>
    
    <!-- Bot√£o Flutuante WhatsApp -->
    <button type="button" onclick="openWhatsApp('Ol√°! Gostaria de mais informa√ß√µes sobre os produtos.');" class="whatsapp-float" title="Fale conosco no WhatsApp" aria-label="Abrir WhatsApp">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 0C7.164 0 0 7.164 0 16c0 2.827.744 5.48 2.044 7.78L0 32l8.47-2.044C10.77 32.256 13.423 33 16 33c8.836 0 16-7.164 16-16S24.836 0 16 0z" fill="#25D366"/>
            <path d="M24.38 22.12c-.3.85-1.5 1.58-2.47 1.79-.62.13-1.43.23-2.33-.26-.47-.25-1.08-.59-1.85-1.01-3.05-1.68-5.03-3.66-5.66-4.28-.63-.63-1.33-1.68-1.85-2.64-.52-.96-.1-1.48.13-1.96.23-.48.52-.96.78-1.44.26-.48.39-.96.26-1.44-.13-.48-.52-.85-1.18-1.18l-.85-.39c-.48-.23-1.18-.39-1.79-.39-.62 0-1.31.13-1.96.52-.65.39-1.31 1.05-1.79 1.85-.48.8-.78 1.79-.78 2.77 0 .98.26 1.96.78 2.77.52.8 1.18 1.58 1.85 2.25.67.67 1.44 1.31 2.25 1.79.8.48 1.68.85 2.64 1.18.96.33 1.96.52 2.9.52.94 0 1.85-.19 2.64-.52.8-.33 1.58-.78 2.25-1.31.67-.52 1.18-1.05 1.68-1.68.5-.63.85-1.31 1.05-1.96.2-.65.26-1.31.13-1.96z" fill="#FFF"/>
        </svg>
        <span class="whatsapp-pulse"></span>
    </button>
</body>
</html>

